# Status Check Flow Diagram

## User Journey: Checking Grievance Status

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER OPENS TYPEBOT CHATBOT                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WELCOME SCREEN                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ‘‹ Welcome to the Grievance & Feedback system            â”‚     â”‚
â”‚  â”‚  What would you like to do today?                          â”‚     â”‚
â”‚  â”‚                                                             â”‚     â”‚
â”‚  â”‚  [ Submit a grievance? ]                                   â”‚     â”‚
â”‚  â”‚  [ Check status? ]         â—„â”€â”€â”€ USER SELECTS THIS        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATUS LOOKUP - ID INPUT                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Please enter your reference ID (e.g., GRV-01ABCâ€¦):       â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚     â”‚
â”‚  â”‚  â”‚ GRV-01K88MF7431X7NF9D4GHQN5742            â”‚           â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ID FORMAT VALIDATION                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Regex Check: ^GRV-[A-Z0-9]{26}$                          â”‚     â”‚
â”‚  â”‚  - Must start with "GRV-"                                  â”‚     â”‚
â”‚  â”‚  - Must be exactly 30 characters                           â”‚     â”‚
â”‚  â”‚  - ULID must be 26 uppercase alphanumeric characters      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ VALID                                          â”‚ INVALID
      â–¼                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FETCH GRIEVANCE            â”‚      â”‚   ERROR MESSAGE             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ GET /api/grievances/   â”‚  â”‚      â”‚  â”‚ Please paste a full  â”‚   â”‚
â”‚  â”‚ {lookup_id}            â”‚  â”‚      â”‚  â”‚ GRV ID               â”‚   â”‚
â”‚  â”‚                        â”‚  â”‚      â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚ Server: grievance-api  â”‚  â”‚      â”‚  â”‚ [ Try again ]        â”‚   â”‚
â”‚  â”‚ Port: 8000             â”‚  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
        â”‚                                            â”‚
        â–¼                                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   API RESPONSE ROUTING       â”‚                    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                    â”‚
    â”‚ 200 OK               â”‚ 404 NOT FOUND          â”‚
    â–¼                      â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  SHOW STATUS   â”‚    â”‚  NOT FOUND ERROR   â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚ STATUS:  â”‚  â”‚    â”‚  â”‚ I couldn't   â”‚  â”‚        â”‚
â”‚  â”‚ Under    â”‚  â”‚    â”‚  â”‚ find that    â”‚  â”‚        â”‚
â”‚  â”‚ Review   â”‚  â”‚    â”‚  â”‚ reference    â”‚  â”‚        â”‚
â”‚  â”‚          â”‚  â”‚    â”‚  â”‚              â”‚  â”‚        â”‚
â”‚  â”‚ DETAILS  â”‚  â”‚    â”‚  â”‚ [ Try again ]â”‚  â”‚        â”‚
â”‚  â”‚ ...      â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                   â”‚
     â”‚                           â”‚                   â”‚
     â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                   â”‚
     â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  RE-ENTER ID   â”‚
                                 â”‚  OR EXIT       â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## System Architecture Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMPONENTS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TYPEBOT   â”‚  HTTP    â”‚  FASTAPI    â”‚   SQL    â”‚  POSTGRESQL  â”‚
â”‚   VIEWER    â”‚ â”€â”€â”€â”€â”€â”€â–¶  â”‚     API     â”‚ â—€â”€â”€â”€â”€â”€â–¶  â”‚   DATABASE   â”‚
â”‚             â”‚          â”‚             â”‚          â”‚              â”‚
â”‚  Port 8082  â”‚          â”‚  Port 8000  â”‚          â”‚  Port 5432   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                         â”‚
      â”‚                         â”‚
      â–¼                         â–¼
  User inputs           GET /api/grievances/{id}
  GRV-01K...            â†“
      â”‚                 Fetch from database
      â”‚                 â†“
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Return GrievancePublic
                        {
                          id, status, details,
                          location, timestamps...
                        }
```

## Data Flow: Status Check

```
1. USER ACTION
   â”‚
   â”œâ”€â–¶ Opens Typebot chatbot
   â”œâ”€â–¶ Selects "Check status?"
   â””â”€â–¶ Enters tracking ID: GRV-01K88MF7431X7NF9D4GHQN5742
       â”‚
       â–¼
2. TYPEBOT VALIDATION
   â”‚
   â”œâ”€â–¶ Regex validation: ^GRV-[A-Z0-9]{26}$
   â”œâ”€â–¶ Format check passed
   â””â”€â–¶ Prepare webhook request
       â”‚
       â–¼
3. API REQUEST
   â”‚
   â”œâ”€â–¶ Method: GET
   â”œâ”€â–¶ URL: http://grievance-api:8000/api/grievances/{id}
   â”œâ”€â–¶ Headers: Content-Type: application/json
   â””â”€â–¶ No authentication required (public endpoint)
       â”‚
       â–¼
4. BACKEND PROCESSING
   â”‚
   â”œâ”€â–¶ Route: grievances.py::get_grievance()
   â”œâ”€â–¶ Extract gid from path parameter
   â”œâ”€â–¶ Query database: db.get(models.Grievance, gid)
   â””â”€â–¶ Check if grievance exists
       â”‚
       â”œâ”€ Found â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                          â”‚
       â””â”€ Not Found               â”‚
          â”‚                       â”‚
          â–¼                       â–¼
    404 Response         200 Response
    {                    {
      "detail":            "id": "GRV-...",
      "Not found"          "external_status": "Under Review",
    }                      "external_status_note": "...",
          â”‚                "created_at": "2025-10-23...",
          â”‚                "island": "Tarawa",
          â”‚                "category_type": "Service Delivery",
          â”‚                ...
          â”‚              }
          â”‚                       â”‚
          â–¼                       â–¼
5. TYPEBOT RESPONSE HANDLING
   â”‚
   â”œâ”€â–¶ Parse response.status
   â”œâ”€â–¶ Route based on status code
   â”‚   â”œâ”€ 200 â†’ Show status block
   â”‚   â””â”€ 404 â†’ Show not found error
   â”‚
   â””â”€â–¶ Display formatted information to user
       â”‚
       â–¼
6. USER SEES RESULT
   â”‚
   â”œâ”€â–¶ Status information displayed
   â”œâ”€â–¶ Options: Check another | Done
   â””â”€â–¶ Can repeat process or exit
```

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR SCENARIOS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. INVALID FORMAT
   â”‚
   GRV-123 (too short)
   â”‚
   â”œâ”€â–¶ Typebot regex validation fails
   â””â”€â–¶ Error: "Please paste a full GRV ID"
       â””â”€â–¶ Return to input prompt

2. GRIEVANCE NOT FOUND
   â”‚
   GRV-01K88INVALID0000000000
   â”‚
   â”œâ”€â–¶ Typebot validation passes
   â”œâ”€â–¶ API call made
   â”œâ”€â–¶ Database returns null
   â””â”€â–¶ API returns 404
       â””â”€â–¶ Error: "I couldn't find that reference"
           â””â”€â–¶ Return to input prompt

3. SYSTEM TEMPORARILY UNAVAILABLE
   â”‚
   API connection timeout
   â”‚
   â”œâ”€â–¶ Network/server issue
   â”œâ”€â–¶ No response received
   â””â”€â–¶ Error: "Our system is busy right now"
       â””â”€â–¶ Wait 60 seconds
           â””â”€â–¶ Return to input prompt
```

## Status Update Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           EXTERNAL SYSTEM STATUS UPDATES                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ODOO (Case Management)
      â”‚
      â”‚ PUT /api/status/{gid}/status
      â”‚ Authorization: Bearer {token}
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status API      â”‚
â”‚  (Authenticated) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Database â”‚
â”‚  - external_     â”‚
â”‚    status        â”‚
â”‚  - external_     â”‚
â”‚    status_note   â”‚
â”‚  - external_     â”‚
â”‚    updated_at    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
     USER CHECKS STATUS
         â”‚
         â–¼
   Updated info displayed
```

## Privacy Protection Flow

```
ANONYMOUS SUBMISSION
      â”‚
      â”œâ”€â–¶ is_anonymous: true
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status Check Response      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âœ… id                 â”‚  â”‚
â”‚  â”‚ âœ… external_status    â”‚  â”‚
â”‚  â”‚ âœ… category_type      â”‚  â”‚
â”‚  â”‚ âœ… island, details    â”‚  â”‚
â”‚  â”‚ âŒ complainant_name   â”‚  â”‚
â”‚  â”‚ âŒ complainant_email  â”‚  â”‚
â”‚  â”‚ âŒ complainant_phone  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NAMED SUBMISSION
      â”‚
      â”œâ”€â–¶ is_anonymous: false
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status Check Response      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âœ… id                 â”‚  â”‚
â”‚  â”‚ âœ… external_status    â”‚  â”‚
â”‚  â”‚ âœ… category_type      â”‚  â”‚
â”‚  â”‚ âœ… island, details    â”‚  â”‚
â”‚  â”‚ âœ… complainant_name   â”‚  â”‚
â”‚  â”‚ âœ… complainant_email  â”‚  â”‚
â”‚  â”‚ âœ… complainant_phone  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Components

### Typebot Groups (from JSON config)
- `efypu2p9ta19ka6j7wjh58jy` - Welcome screen with options
- `zyx72qhxfuz2eg8l4l4wxvdt` - Status lookup (ID input)
- `tw52lmlbc9nuvs2ei1gy428f` - Fetch grievance (API webhook)
- `t7lcrwdj8j93dwmyohmb72h4` - Route lookup (response handling)
- `rs3ppgp6g8pim55rwigako4u` - Show status (display block)
- `gjuezqnqlpvn34k5qzj8pr4p` - Not found error
- `znbo90i4kdy2zsid50epuzv2` - Invalid ID error
- `xyuyggayijho4c468yfxhg4i` - Temporary error

### Backend Components
- **Router**: `app/routers/grievances.py`
- **Endpoint**: `get_grievance(gid: str, db: Session)`
- **Model**: `models.Grievance`
- **Schema**: `schemas.GrievancePublic`
- **Database**: PostgreSQL table `grievance`

### Test Coverage
- `test_status_check_flow.py` - 6 comprehensive tests
- `test_typebot_integration.py` - 3 status lookup tests
- `test_grievances.py` - Core retrieval tests

---

**Legend**
- `â”‚` Flow direction
- `â–¼` Process continues
- `â—€â”€â–¶` Bidirectional communication
- `â”€â”€â–¶` Request/Response
- `âœ…` Field included in response
- `âŒ` Field excluded (privacy)
